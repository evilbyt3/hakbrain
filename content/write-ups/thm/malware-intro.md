---
title: Malware Intro
tags:
- writeups
---

When analysing malware it's important to consider the following:
- Point of Entry *(PoE)*: how did the malware ended up on your network *(i.e through spam that our e-mail filtering missed & user opened an attachment? => review spam filters & train user better for future prevention)*
- What are the indicators that malware has even been executed on a machine? *(e.g files, procs, attempt of "un-ordinary" comms)*
- How does the malware perform? Does it attempt to infect other devices? Or encrypt files / install a backdoor/RAT
- How can we ultimately prevent and/or detect further infection?!

## Malware Campaigns
Attacks can generally be classified into two types
1. **Targeted**: malware attacks created for a specific purpose against a specific target *(e.g [DarkHotel](https://www.kaspersky.co.uk/resource-center/threats/darkhotel-malware-virus-threat-definition) malware - designed to steal information such as authentication details from government officials)*
2. **Mass Campaign**: most common type of attacks, with the sole purpose of infecting as many devices as possible & perform whatever it may *(regardless of the target)*
	- companies such as [Kaspersky](https://www.kaspersky.it/) track these campaigns *(known as Advanced Persistent Threats - APTs)* & often report their infection rate/indicators of compromise *(IOCs)*
	- e.g [Crouching Yeti](https://www.kaspersky.co.uk/resource-center/threats/crouching-yeti-energetic-bear-malware-threat) campaign which targeted multiple industries *(e.g industrial, pharma, manufacturing, education, construction)*

## Identifying Malware

The process of a malware attack can be broken down into a few broad steps:
- **Delivery**: USB, PDF attachmnts through phishing campaigns, vulnerability enumeration
- **Execution**: what does the malware actually do? *(encrypts files? => ransomware, records info such as keystrokes, video, audio => spyware, etc)*
- **Persistence**: it wouldn't make sense for malware developers to spend so many resources just for it to execute once and that's it... gone => so persistance mechanisms are usually employed to maintain access to a compromised computer
- **Propagation**: if it can infect 1 device, why not infect multiple *(maybe even create a botnet)*. Host discovery usually generates a lot of traffic

There are 2 main categories of fingerprints that malware might leave on a host after infection:
1. **Host-Based Signatures**: the results of execution and any persistence *(e.g file encrypted? any additional software installed)*
2. **Network-Based Signatures**: are the observation of any networking communication taking place during delivery, execution and propagation *(e.g ransomware: any payments commited to BTC addrs)*

## Static VS Dynamic Analysis
- **Static Analysis**: is used to gain a high-level abstraction of the sample. At its core, this method is of the analysis of the sample at the state it presents itself as, without executing the code
- **Dynamic Analysis**: involves executing the sample and observing what happens. Usually done in a VM


---

## References

## See Also
- [[write-ups/thm/history-of-malware]]
- [[write-ups/THM]]